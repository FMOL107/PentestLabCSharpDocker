FROM kalilinux/kali-rolling:amd64

ENV DEBIAN_FRONTEND="noninteractive"
RUN apt update \
    && apt dist-upgrade -y \
    && apt install -y kali-desktop-xfce xrdp \
                        nmap fping masscan curl binutils iputils-ping

RUN echo "root:root" | chpasswd

CMD /etc/init.d/xrdp start && tail -f /dev/null


# Build
# docker build . -f kali-rdp.dockerfile -t kali-rdp

# Run
# docker run -dit -p 3389:3389 --name kali-rdp --hostname kali-rdp kali-rdp